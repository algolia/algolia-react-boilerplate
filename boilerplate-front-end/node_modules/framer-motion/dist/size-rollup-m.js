import*as t from"react";import n,{createContext as e,useContext as r,useLayoutEffect as o,useEffect as a,useRef as i,useCallback as s,useMemo as c,forwardRef as l,createElement as u}from"react";const f=e({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),d=e({});const m=e(null),p="undefined"!=typeof document,g=p?o:a,y=e({strict:!1});function h(t,n,e,o){const s=r(d).visualElement,c=r(y),l=r(m),u=r(f).reducedMotion,p=i();o=o||c.renderer,!p.current&&o&&(p.current=o(t,{visualState:n,parent:s,props:e,presenceId:l?l.id:void 0,blockInitialAnimation:!!l&&!1===l.initial,reducedMotionConfig:u}));const h=p.current;return g(()=>{h&&h.render()}),a(()=>{h&&h.animationState&&h.animationState.animateChanges()}),g(()=>()=>h&&h.notify("Unmount"),[]),h}function v(t,n,e){return s(r=>{var o;r&&t.mount&&t.mount(r),n&&(r?n.mount(r):n.unmount()),e&&("function"==typeof e?e(r):"object"==typeof(o=e)&&Object.prototype.hasOwnProperty.call(o,"current")&&(e.current=r))},[n])}function w(t){return"string"==typeof t||Array.isArray(t)}function S(t){return"object"==typeof t&&"function"==typeof t.start}const b=["initial","animate","exit","whileHover","whileDrag","whileTap","whileFocus","whileInView"];function x(t){return S(t.animate)||b.some(n=>w(t[n]))}function C(t){const{initial:n,animate:e}=function(t,n){if(x(t)){const{initial:n,animate:e}=t;return{initial:!1===n||w(n)?n:void 0,animate:w(e)?e:void 0}}return!1!==t.inherit?n:{}}(t,r(d));return c(()=>({initial:n,animate:e}),[V(n),V(e)])}function V(t){return Array.isArray(t)?t.join(" "):t}const T=t=>({isEnabled:n=>t.some(t=>!!n[t])}),E={measureLayout:T(["layout","layoutId","drag"]),animation:T(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"]),exit:T(["exit"]),drag:T(["drag","dragControls"]),focus:T(["whileFocus"]),hover:T(["whileHover","onHoverStart","onHoverEnd"]),tap:T(["whileTap","onTap","onTapStart","onTapCancel"]),pan:T(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),inView:T(["whileInView","onViewportEnter","onViewportLeave"])};function P(t){const n=i(null);return null===n.current&&(n.current=t()),n.current}const k=!1;let A=1;const L=e({});class O extends n.Component{getSnapshotBeforeUpdate(){const{visualElement:t,props:n}=this.props;return t&&t.setProps(n),null}componentDidUpdate(){}render(){return this.props.children}}const B=e({}),M=Symbol.for("motionComponentSymbol");function j({preloadedFeatures:n,createVisualElement:e,projectionNodeConstructor:o,useRender:a,useVisualState:i,Component:s}){n&&function(t){for(const n in t)"projectionNodeConstructor"===n?E.projectionNodeConstructor=t[n]:E[n].Component=t[n]}(n);const c=l((function(c,l){const u={...r(f),...c,layoutId:D(c)},{isStatic:m}=u;let g=null;const w=C(c),S=m?void 0:P(()=>{if(k)return A++}),b=i(c,m);if(!m&&p){w.visualElement=h(s,b,u,e);const t=r(y).strict,a=r(B);w.visualElement&&(g=w.visualElement.loadFeatures(u,t,n,S,o||E.projectionNodeConstructor,a))}return t.createElement(O,{visualElement:w.visualElement,props:u},g,t.createElement(d.Provider,{value:w},a(s,c,S,v(b,w.visualElement,l),b,m,w.visualElement)))}));return c[M]=s,c}function D({layoutId:t}){const n=r(L).id;return n&&void 0!==t?n+"-"+t:t}const R=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function W(t){return"string"==typeof t&&!t.includes("-")&&!!(R.indexOf(t)>-1||/[A-Z]/.test(t))}const X={},Y=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],H=new Set(Y);function F(t,{layout:n,layoutId:e}){return H.has(t)||t.startsWith("origin")||(n||void 0!==e)&&(!!X[t]||"opacity"===t)}const I=t=>!!(null==t?void 0:t.getVelocity),$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Z=(t,n)=>Y.indexOf(t)-Y.indexOf(n);function z(t){return t.startsWith("--")}const N=(t,n)=>n&&"number"==typeof t?n.transform(t):t,U={test:t=>"number"==typeof t,parse:parseFloat,transform:t=>t},K={...U,transform:t=>((t,n,e)=>Math.min(Math.max(e,t),n))(0,1,t)},q={...U,default:1};const _=t=>({test:n=>function(t){return"string"==typeof t}(n)&&n.endsWith(t)&&1===n.split(" ").length,parse:parseFloat,transform:n=>`${n}${t}`}),G=_("deg"),J=_("%"),Q=_("px"),tt={...J,parse:t=>J.parse(t)/100,transform:t=>J.transform(100*t)},nt={...U,transform:Math.round},et={borderWidth:Q,borderTopWidth:Q,borderRightWidth:Q,borderBottomWidth:Q,borderLeftWidth:Q,borderRadius:Q,radius:Q,borderTopLeftRadius:Q,borderTopRightRadius:Q,borderBottomRightRadius:Q,borderBottomLeftRadius:Q,width:Q,maxWidth:Q,height:Q,maxHeight:Q,size:Q,top:Q,right:Q,bottom:Q,left:Q,padding:Q,paddingTop:Q,paddingRight:Q,paddingBottom:Q,paddingLeft:Q,margin:Q,marginTop:Q,marginRight:Q,marginBottom:Q,marginLeft:Q,rotate:G,rotateX:G,rotateY:G,rotateZ:G,scale:q,scaleX:q,scaleY:q,scaleZ:q,skew:G,skewX:G,skewY:G,distance:Q,translateX:Q,translateY:Q,translateZ:Q,x:Q,y:Q,z:Q,perspective:Q,transformPerspective:Q,opacity:K,originX:tt,originY:tt,originZ:Q,zIndex:nt,fillOpacity:K,strokeOpacity:K,numOctaves:nt};function rt(t,n,e,r){const{style:o,vars:a,transform:i,transformKeys:s,transformOrigin:c}=t;s.length=0;let l=!1,u=!1,f=!0;for(const t in n){const e=n[t];if(z(t)){a[t]=e;continue}const r=et[t],d=N(e,r);if(H.has(t)){if(l=!0,i[t]=d,s.push(t),!f)continue;e!==(r.default||0)&&(f=!1)}else t.startsWith("origin")?(u=!0,c[t]=d):o[t]=d}if(n.transform||(l||r?o.transform=function({transform:t,transformKeys:n},{enableHardwareAcceleration:e=!0,allowTransformNone:r=!0},o,a){let i="";n.sort(Z);for(const e of n)i+=`${$[e]||e}(${t[e]}) `;return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),a?i=a(t,o?"":i):r&&o&&(i="none"),i}(t,e,f,r):o.transform&&(o.transform="none")),u){const{originX:t="50%",originY:n="50%",originZ:e=0}=c;o.transformOrigin=`${t} ${n} ${e}`}}const ot=()=>({style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}});function at(t,n,e){for(const r in n)I(n[r])||F(r,e)||(t[r]=n[r])}function it(t,n,e){const r={};return at(r,t.style||{},t),Object.assign(r,function({transformTemplate:t},n,e){return c(()=>{const r={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}};return rt(r,n,{enableHardwareAcceleration:!e},t),Object.assign({},r.vars,r.style)},[n])}(t,n,e)),t.transformValues?t.transformValues(r):r}function st(t,n,e){const r={},o=it(t,n,e);return t.drag&&!1!==t.dragListener&&(r.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=!0===t.drag?"none":"pan-"+("x"===t.drag?"y":"x")),r.style=o,r}const ct=new Set(["initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","layoutDependency","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragSnapToOrigin","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","onHoverStart","onHoverEnd","layoutScroll","whileInView","onViewportEnter","onViewportLeave","viewport","whileTap","onTap","onTapStart","onTapCancel","animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView","onPan","onPanStart","onPanSessionStart","onPanEnd"]);function lt(t){return ct.has(t)}let ut=t=>!lt(t);try{(ft=require("@emotion/is-prop-valid").default)&&(ut=t=>t.startsWith("on")?!lt(t):ft(t))}catch(t){}var ft;function dt(t,n,e){return"string"==typeof t?t:Q.transform(n+e*t)}const mt={offset:"stroke-dashoffset",array:"stroke-dasharray"},pt={offset:"strokeDashoffset",array:"strokeDasharray"};function gt(t,{attrX:n,attrY:e,originX:r,originY:o,pathLength:a,pathSpacing:i=1,pathOffset:s=0,...c},l,u,f){if(rt(t,c,l,f),u)return void(t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox));t.attrs=t.style,t.style={};const{attrs:d,style:m,dimensions:p}=t;d.transform&&(p&&(m.transform=d.transform),delete d.transform),p&&(void 0!==r||void 0!==o||m.transform)&&(m.transformOrigin=function(t,n,e){return`${dt(n,t.x,t.width)} ${dt(e,t.y,t.height)}`}(p,void 0!==r?r:.5,void 0!==o?o:.5)),void 0!==n&&(d.x=n),void 0!==e&&(d.y=e),void 0!==a&&function(t,n,e=1,r=0,o=!0){t.pathLength=1;const a=o?mt:pt;t[a.offset]=Q.transform(-r);const i=Q.transform(n),s=Q.transform(e);t[a.array]=`${i} ${s}`}(d,a,i,s,!1)}const yt=()=>({style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{},attrs:{}}),ht=t=>"string"==typeof t&&"svg"===t.toLowerCase();function vt(t,n,e,r){const o=c(()=>{const e={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{},attrs:{}};return gt(e,n,{enableHardwareAcceleration:!1},ht(r),t.transformTemplate),{...e.attrs,style:{...e.style}}},[n]);if(t.style){const n={};at(n,t.style,t),o.style={...n,...o.style}}return o}function wt(t=!1){return(n,e,r,o,{latestValues:a},i)=>{const s=(W(n)?vt:st)(e,a,i,n),c={...function(t,n,e){const r={};for(const o in t)(ut(o)||!0===e&&lt(o)||!n&&!lt(o)||t.draggable&&o.startsWith("onDrag"))&&(r[o]=t[o]);return r}(e,"string"==typeof n,t),...s,ref:o};return r&&(c["data-projection-id"]=r),u(n,c)}}const St=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function bt(t,n,e,r){!function(t,{style:n,vars:e},r,o){Object.assign(t.style,n,o&&o.getProjectionStyles(r));for(const n in e)t.style.setProperty(n,e[n])}(t,n,void 0,r);for(const e in n.attrs)t.setAttribute(St.has(e)?e:e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n.attrs[e])}function xt(t){const{style:n}=t,e={};for(const r in n)(I(n[r])||F(r,t))&&(e[r]=n[r]);return e}function Ct(t){const n=I(t)?t.get():t;return e=n,Boolean(e&&"object"==typeof e&&e.mix&&e.toValue)?n.toValue():n;var e}const Vt=t=>(n,e)=>{const o=r(d),a=r(m),i=()=>function({scrapeMotionValuesFromProps:t,createRenderState:n,onMount:e},r,o,a){const i={latestValues:Tt(r,o,a,t),renderState:n()};return e&&(i.mount=t=>e(r,t,i)),i}(t,n,o,a);return e?i():P(i)};function Tt(t,n,e,r){const o={},a=r(t);for(const t in a)o[t]=Ct(a[t]);let{initial:i,animate:s}=t;const c=x(t),l=function(t){return Boolean(x(t)||t.variants)}(t);n&&l&&!c&&!1!==t.inherit&&(void 0===i&&(i=n.initial),void 0===s&&(s=n.animate));let u=!!e&&!1===e.initial;u=u||!1===i;const f=u?s:i;if(f&&"boolean"!=typeof f&&!S(f)){(Array.isArray(f)?f:[f]).forEach(n=>{const e=function(t,n,e,r={},o={}){return"function"==typeof n&&(n=n(void 0!==e?e:t.custom,r,o)),"string"==typeof n&&(n=t.variants&&t.variants[n]),"function"==typeof n&&(n=n(void 0!==e?e:t.custom,r,o)),n}(t,n);if(!e)return;const{transitionEnd:r,transition:a,...i}=e;for(const t in i){let n=i[t];if(Array.isArray(n)){n=n[u?n.length-1:0]}null!==n&&(o[t]=n)}for(const t in r)o[t]=r[t]})}return o}const Et={useVisualState:Vt({scrapeMotionValuesFromProps:function(t){const n=xt(t);for(const e in t)if(I(t[e])){n["x"===e||"y"===e?"attr"+e.toUpperCase():e]=t[e]}return n},createRenderState:yt,onMount:(t,n,{renderState:e,latestValues:r})=>{try{e.dimensions="function"==typeof n.getBBox?n.getBBox():n.getBoundingClientRect()}catch(t){e.dimensions={x:0,y:0,width:0,height:0}}gt(e,r,{enableHardwareAcceleration:!1},ht(n.tagName),t.transformTemplate),bt(n,e)}})},Pt={useVisualState:Vt({scrapeMotionValuesFromProps:xt,createRenderState:ot})};const kt=function(t){function n(n,e={}){return j(t(n,e))}if("undefined"==typeof Proxy)return n;const e=new Map;return new Proxy(n,{get:(t,r)=>(e.has(r)||e.set(r,n(r)),e.get(r))})}((function(t,{forwardMotionProps:n=!1},e,r,o){return{...W(t)?Et:Pt,preloadedFeatures:e,useRender:wt(n),createVisualElement:r,projectionNodeConstructor:o,Component:t}}));export{kt as m};
