import*as t from"react";import n,{createContext as e,useContext as r,useLayoutEffect as o,useEffect as a,useRef as s,useCallback as i,useMemo as u,forwardRef as c,createElement as l}from"react";import{i as m,P as d,M as f,a as p,b as g,c as y,f as v,u as h,g as S,S as E,L as w,d as C,e as V,h as A,j as b,k as M,l as P,r as T,m as j,n as x,o as D,s as L,p as B,q as F}from"./size-rollup-dom-max-assets.js";const I=e({});const O=m?o:a,k=e({strict:!1});function H(t,n,e,o){const i=r(I).visualElement,u=r(k),c=r(d),l=r(f).reducedMotion,m=s();o=o||u.renderer,!m.current&&o&&(m.current=o(t,{visualState:n,parent:i,props:e,presenceId:c?c.id:void 0,blockInitialAnimation:!!c&&!1===c.initial,reducedMotionConfig:l}));const p=m.current;return O(()=>{p&&p.render()}),a(()=>{p&&p.animationState&&p.animationState.animateChanges()}),O(()=>()=>p&&p.notify("Unmount"),[]),p}function N(t){const{initial:n,animate:e}=function(t,n){if(g(t)){const{initial:n,animate:e}=t;return{initial:!1===n||y(n)?n:void 0,animate:y(e)?e:void 0}}return!1!==t.inherit?n:{}}(t,r(I));return u(()=>({initial:n,animate:e}),[R(n),R(e)])}function R(t){return Array.isArray(t)?t.join(" "):t}let U=1;class K extends n.Component{getSnapshotBeforeUpdate(){const{visualElement:t,props:n}=this.props;return t&&t.setProps(n),null}componentDidUpdate(){}render(){return this.props.children}}const W=Symbol.for("motionComponentSymbol");function q({preloadedFeatures:n,createVisualElement:e,projectionNodeConstructor:o,useRender:a,useVisualState:s,Component:u}){n&&function(t){for(const n in t)"projectionNodeConstructor"===n?v.projectionNodeConstructor=t[n]:v[n].Component=t[n]}(n);const l=c((function(c,l){const d={...r(f),...c,layoutId:_(c)},{isStatic:g}=d;let y=null;const w=N(c),C=g?void 0:h(()=>{if(S.hasEverUpdated)return U++}),V=s(c,g);if(!g&&m){w.visualElement=H(u,V,d,e);const t=r(k).strict,a=r(E);w.visualElement&&(y=w.visualElement.loadFeatures(d,t,n,C,o||v.projectionNodeConstructor,a))}return t.createElement(K,{visualElement:w.visualElement,props:d},y,t.createElement(I.Provider,{value:w},a(u,c,C,function(t,n,e){return i(r=>{r&&t.mount&&t.mount(r),n&&(r?n.mount(r):n.unmount()),e&&("function"==typeof e?e(r):p(e)&&(e.current=r))},[n])}(V,w.visualElement,l),V,g,w.visualElement)))}));return l[W]=u,l}function _({layoutId:t}){const n=r(w).id;return n&&void 0!==t?n+"-"+t:t}const z=()=>({style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}});function X(t,n,e){for(const r in n)C(n[r])||V(r,e)||(t[r]=n[r])}function Y(t,n,e){const r={};return X(r,t.style||{},t),Object.assign(r,function({transformTemplate:t},n,e){return u(()=>{const r={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}};return A(r,n,{enableHardwareAcceleration:!e},t),Object.assign({},r.vars,r.style)},[n])}(t,n,e)),t.transformValues?t.transformValues(r):r}function G(t,n,e){const r={},o=Y(t,n,e);return t.drag&&!1!==t.dragListener&&(r.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=!0===t.drag?"none":"pan-"+("x"===t.drag?"y":"x")),r.style=o,r}const J=new Set(["initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","layoutDependency","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragSnapToOrigin","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","onHoverStart","onHoverEnd","layoutScroll","whileInView","onViewportEnter","onViewportLeave","viewport","whileTap","onTap","onTapStart","onTapCancel","animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView","onPan","onPanStart","onPanSessionStart","onPanEnd"]);function Q(t){return J.has(t)}let Z=t=>!Q(t);try{($=require("@emotion/is-prop-valid").default)&&(Z=t=>t.startsWith("on")?!Q(t):$(t))}catch(t){}var $;const tt=()=>({style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{},attrs:{}});function nt(t,n,e,r){const o=u(()=>{const e={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{},attrs:{}};return b(e,n,{enableHardwareAcceleration:!1},M(r),t.transformTemplate),{...e.attrs,style:{...e.style}}},[n]);if(t.style){const n={};X(n,t.style,t),o.style={...n,...o.style}}return o}function et(t=!1){return(n,e,r,o,{latestValues:a},s)=>{const i=(P(n)?nt:G)(e,a,s,n),u={...function(t,n,e){const r={};for(const o in t)(Z(o)||!0===e&&Q(o)||!n&&!Q(o)||t.draggable&&o.startsWith("onDrag"))&&(r[o]=t[o]);return r}(e,"string"==typeof n,t),...i,ref:o};return r&&(u["data-projection-id"]=r),l(n,u)}}const rt=t=>(n,e)=>{const o=r(I),a=r(d),s=()=>function({scrapeMotionValuesFromProps:t,createRenderState:n,onMount:e},r,o,a){const s={latestValues:ot(r,o,a,t),renderState:n()};return e&&(s.mount=t=>e(r,t,s)),s}(t,n,o,a);return e?s():h(s)};function ot(t,n,e,r){const o={},a=r(t);for(const t in a)o[t]=T(a[t]);let{initial:s,animate:i}=t;const u=g(t),c=j(t);n&&c&&!u&&!1!==t.inherit&&(void 0===s&&(s=n.initial),void 0===i&&(i=n.animate));let l=!!e&&!1===e.initial;l=l||!1===s;const m=l?i:s;if(m&&"boolean"!=typeof m&&!x(m)){(Array.isArray(m)?m:[m]).forEach(n=>{const e=D(t,n);if(!e)return;const{transitionEnd:r,transition:a,...s}=e;for(const t in s){let n=s[t];if(Array.isArray(n)){n=n[l?n.length-1:0]}null!==n&&(o[t]=n)}for(const t in r)o[t]=r[t]})}return o}const at={useVisualState:rt({scrapeMotionValuesFromProps:L,createRenderState:tt,onMount:(t,n,{renderState:e,latestValues:r})=>{try{e.dimensions="function"==typeof n.getBBox?n.getBBox():n.getBoundingClientRect()}catch(t){e.dimensions={x:0,y:0,width:0,height:0}}b(e,r,{enableHardwareAcceleration:!1},M(n.tagName),t.transformTemplate),B(n,e)}})},st={useVisualState:rt({scrapeMotionValuesFromProps:F,createRenderState:z})};const it=function(t){function n(n,e={}){return q(t(n,e))}if("undefined"==typeof Proxy)return n;const e=new Map;return new Proxy(n,{get:(t,r)=>(e.has(r)||e.set(r,n(r)),e.get(r))})}((function(t,{forwardMotionProps:n=!1},e,r,o){return{...P(t)?at:st,preloadedFeatures:e,useRender:et(n),createVisualElement:r,projectionNodeConstructor:o,Component:t}}));export{it as m};
